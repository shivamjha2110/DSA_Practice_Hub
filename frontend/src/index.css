@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;

    /* Chart theming (Recharts) */
    --chart-fg: rgba(24, 24, 27, 0.72);
    --chart-fg-strong: rgba(24, 24, 27, 0.9);
    --chart-grid: rgba(24, 24, 27, 0.12);
    --chart-tooltip-bg: rgba(255, 255, 255, 0.94);
    --chart-tooltip-border: rgba(24, 24, 27, 0.12);
  }

  html.dark {
    color-scheme: dark;

    --chart-fg: rgba(255, 255, 255, 0.72);
    --chart-fg-strong: rgba(255, 255, 255, 0.92);
    --chart-grid: rgba(255, 255, 255, 0.12);
    --chart-tooltip-bg: rgba(24, 24, 27, 0.92);
    --chart-tooltip-border: rgba(255, 255, 255, 0.12);
  }

  html, body, #root { height: 100%; }

  body {
    @apply bg-zinc-50 text-zinc-900 antialiased;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  }

  .dark body { @apply bg-zinc-950 text-zinc-50; }

  ::selection { @apply bg-cyan-200/70 text-zinc-900; }
  .dark ::selection { @apply bg-cyan-500/30 text-zinc-50; }

  /* Native select dropdown visibility (especially on dark mode) */
  select { color: inherit; }
  select option, select optgroup {
    background-color: rgb(255 255 255);
    color: rgb(24 24 27);
  }
  html.dark select option, html.dark select optgroup {
    background-color: rgb(24 24 27);
    color: rgb(244 244 245);
  }
}

@layer components {
  .container-app { @apply mx-auto w-full max-w-6xl px-4; }

  .card {
    @apply rounded-[28px] border border-zinc-200/70 bg-white/70 shadow-sm backdrop-blur;
  }
  .dark .card {
    @apply border-white/10 bg-white/5 shadow-none;
  }

  .card-soft {
    @apply rounded-[28px] border border-zinc-200/60 bg-white/50 shadow-sm backdrop-blur;
  }
  .dark .card-soft {
    @apply border-white/10 bg-white/5;
  }

  .muted { @apply text-sm text-zinc-600; }
  .dark .muted { @apply text-white/60; }

  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2 text-sm font-semibold transition active:scale-[0.98];
  }

  .btn-primary {
    @apply btn text-zinc-950 shadow-sm;
    background: linear-gradient(90deg, rgba(34,197,94,1) 0%, rgba(6,182,212,1) 45%, rgba(168,85,247,1) 100%);
  }
  .btn-primary:hover { filter: brightness(0.97); }

  .btn-ghost {
    @apply btn border border-zinc-200/80 bg-white/60 hover:bg-white;
  }
  .dark .btn-ghost {
    @apply border-white/10 bg-white/5 hover:bg-white/10;
  }

  .btn-danger {
    @apply btn border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100;
  }
  .dark .btn-danger {
    @apply border-rose-500/20 bg-rose-500/10 text-rose-200 hover:bg-rose-500/15;
  }

  .input {
    @apply w-full rounded-2xl border border-zinc-200/80 bg-white/70 px-4 py-3 text-sm outline-none ring-0 placeholder:text-zinc-400 focus:border-zinc-300 focus:ring-2 focus:ring-cyan-200/70;
  }
  .dark .input {
    @apply border-white/10 bg-white/5 placeholder:text-white/30 focus:border-white/20 focus:ring-cyan-500/20;
  }

  select.input {
    @apply appearance-none bg-no-repeat bg-[right_1rem_center] pr-10 cursor-pointer;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-size: 1.25em 1.25em;
  }
  .dark select.input {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23a1a1aa' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
  }

  .badge {
    @apply inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] font-semibold;
  }

  .kbd {
    @apply rounded-lg border border-zinc-200 bg-white px-2 py-1 text-xs text-zinc-700;
  }
  .dark .kbd { @apply border-white/10 bg-white/5 text-white/70; }
}

@layer utilities {
  .bg-grid {
    background-image:
      radial-gradient(circle at 1px 1px, rgba(24,24,27,0.12) 1px, transparent 0);
    background-size: 28px 28px;
  }
  .dark .bg-grid {
    background-image:
      radial-gradient(circle at 1px 1px, rgba(255,255,255,0.08) 1px, transparent 0);
  }
}
